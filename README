Using anonymous inner classes to implement finite state machine.

Class StateMachine
	* list of States

Class State
	* message
	* router

Interface Router 

Class RegExRouter
	* map of signals / targets
